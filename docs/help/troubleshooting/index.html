<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=preload as=font href=/fonts/vendor/jost/jost-v4-latin-regular.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=/fonts/vendor/jost/jost-v4-latin-700.woff2 type=font/woff2 crossorigin><link rel=stylesheet href=/main.3efc558be62120d4f3f61531d2819409416e06dc071c2c5c79a90c7ce37102bec4c7882d4eedad8df0d96a42b8cf9a6a5482e61a232f3ac0e923b19e0d1e7354.css integrity="sha512-PvxVi+YhINTz9hUx0oGUCUFuBtwHHCxceakMfONxAr7Ex4gtTu2tjfDZakK4z5pqVILmGiMvOsDpI7GeDR5zVA==" crossorigin=anonymous><noscript><style>img.lazyload{display:none}</style></noscript><meta name=robots content="index, follow"><meta name=googlebot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><meta name=bingbot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><title>Troubleshooting Haaukins - Haaukins</title><meta name=description content="Solutions to common problems on Haaukins Platform"><link rel=canonical href=/docs/help/troubleshooting/><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="/doks.png"><meta name=twitter:title content="Troubleshooting Haaukins"><meta name=twitter:description content="Solutions to common problems on Haaukins Platform"><meta name=twitter:site content="@henkverlinde"><meta name=twitter:creator content="@henkverlinde"><meta property="og:title" content="Troubleshooting Haaukins"><meta property="og:description" content="Solutions to common problems on Haaukins Platform"><meta property="og:type" content="article"><meta property="og:url" content="/docs/help/troubleshooting/"><meta property="og:image" content="/doks.png"><meta property="article:published_time" content="2020-11-12T15:22:20+01:00"><meta property="article:modified_time" content="2021-02-28T21:16:01+02:00"><meta property="og:site_name" content="Haaukins"><meta property="article:publisher" content="https://www.facebook.com/verlinde.henk"><meta property="article:author" content="https://www.facebook.com/verlinde.henk"><meta property="og:locale" content="en_US"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"\/"},{"@type":"ListItem","position":2,"name":"Docshelptroubleshooting","item":"\/docshelptroubleshooting\/"}]}</script><meta name=theme-color content="#fff"><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><script type=text/javascript>(function(a,e,b,f,g,c,d){a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},c=e.createElement(f),c.async=1,c.src="https://www.clarity.ms/tag/"+g,d=e.getElementsByTagName(f)[0],d.parentNode.insertBefore(c,d)})(window,document,"clarity","script","5v4f3jlry6")</script></head><body class="docs single"><div class="header-bar fixed-top"></div><header class="navbar fixed-top navbar-expand-md navbar-light"><div class=container><input class="menu-btn order-0" type=checkbox id=menu-btn>
<label class="menu-icon d-md-none" for=menu-btn><span class=navicon></span></label><a class="navbar-brand order-1 order-md-0 mr-auto" href=/>Haaukins</a>
<button id=mode class="btn btn-link order-2 order-md-4" type=button aria-label="Toggle mode">
<span class=toggle-dark><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></span><span class=toggle-light><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></span></button><ul class="navbar-nav social-nav order-3 order-md-5"><li class=nav-item><a class=nav-link href=https://github.com/aau-network-security/haaukins><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg><span class="ml-2 sr-only">GitHub</span></a></li></ul><div class="collapse navbar-collapse order-4 order-md-1"><ul class="navbar-nav main-nav mr-auto order-5 order-md-2"><li class="nav-item active"><a class=nav-link href=/docs/haaukins/introduction/>Docs</a></li></ul><div class="break order-6 d-md-none"></div><form class="navbar-form flex-grow-1 order-7 order-md-3"><input id=userinput class="form-control is-search" type=search placeholder="Search docs..." aria-label="Search docs..." autocomplete=off><div id=suggestions class="shadow bg-white rounded"></div></form></div></div></header><div class="wrap container" role=document><div class=content><div class="row flex-xl-nowrap"><div class="col-lg-5 col-xl-4 docs-sidebar"><nav class=docs-links aria-label="Main navigation"><h3>Haaukins</h3><ul class=list-unstyled><li><a class=docs-link href=/docs/haaukins/configuration/>Configuration</a></li><li><a class=docs-link href=/docs/haaukins/connected-services/>Connected Services</a></li><li><a class=docs-link href=/docs/haaukins/installation/>Installation</a></li><li><a class=docs-link href=/docs/haaukins/introduction/>Introduction</a></li><li><a class=docs-link href=/docs/haaukins/testing/>Testing</a></li></ul><h3>Challenges</h3><ul class=list-unstyled><li><a class=docs-link href=/docs/challenges/binary/>Binary</a></li><li><a class=docs-link href=/docs/challenges/cryptography/>Cryptography</a></li><li><a class=docs-link href=/docs/challenges/forensics/>Forensics</a></li><li><a class=docs-link href=/docs/challenges/reverse-engineering/>Reverse Engineering</a></li><li><a class=docs-link href=/docs/challenges/starters/>Starters</a></li><li><a class=docs-link href=/docs/challenges/web-exploitation/>Web Exploitation</a></li><li><a class=docs-link href=/docs/challenges/challenge-struct/>A Challenge Struct</a></li><li><a class=docs-link href=/docs/challenges/how-to-create-chal/>How to Create A Challenge</a></li></ul><h3>Help</h3><ul class=list-unstyled><li><a class="docs-link active" href=/docs/help/troubleshooting/>Troubleshooting Haaukins</a></li></ul></nav></div><nav class="docs-toc d-none d-xl-block col-xl-3" aria-label="Secondary navigation"><div class=page-links><h3>On this page</h3><nav id=TableOfContents><ul><li><a href=#no-space-left-on-device>No space left on device</a></li><li><a href=#vm-import-failed>VM Import failed</a><ul><li><a href=#import-vm-failed-due-to-no-space>Import VM failed due to no space</a></li><li><a href=#import-failed-due-to-bad-ova-file>Import failed due to bad ova file</a></li><li><a href=#import-failed-due-to-no-permission>Import failed due to no permission</a></li></ul></li><li><a href=#config-file-not-found>Config file not found</a></li><li><a href=#guacamole-500-error>Guacamole 500 Error</a></li><li><a href=#pool-overlaps-with-other-one-on-this-address-space>Pool overlaps with other one on this address space</a><ul><li><a href=#prune-system>Prune System</a></li><li><a href=#prune-volumes>Prune volumes</a></li></ul></li><li><a href=#unable-to-create-database-client>Unable to create database client</a></li><li><a href=#certificate-issue>Certificate Issue</a></li></ul></nav></div></nav><main class="docs-content col-lg-11 col-xl-9"><h1>Troubleshooting Haaukins</h1><p class=lead>Solutions to common problems.</p><p>In this guideline, the way of handling troubles and possible reasons of troubles will be explained with some solutions.</p><p><em>The issues that you may face during active usage of Haaukins</em></p><ul><li><a href=#no-space-left-on-device>No space left on device</a></li><li><a href=#vm-import-failed>VM Import failed</a><ul><li><a href=#import-vm-failed-due-to-no-space>Import VM failed due to no space</a><ul><li><a href=#create-data-folder-for-each-user-on-the-system>Create data folder for each user on the system</a></li></ul></li></ul></li><li><a href=#config-file-not-found>Config file not found</a></li><li><a href=#guacamole-500-error>Guacamole 500 Error</a></li><li><a href=#pool-overlaps-with-other-one-on-this-address-space>Pool overlaps with other one on this address space</a><ul><li><a href=#prune-system>Prune System</a></li><li><a href=#prune-volumes>Prune volumes</a></li></ul></li><li><a href=#unable-to-create-database-client>Unable to create database client</a></li><li><a href=#certificate-issue>Certificate Issue</a></li></ul><p><em>Issues which can be seeing in setting up development environment</em></p><ul><li><a href=#config-file-not-found>Config file not found</a></li><li><a href=#unable-to-create-database-client>Unable to create database client</a></li><li><a href=#certificate-issue>Certificate Issue</a></li></ul><h2 id=no-space-left-on-device>No space left on device<a href=#no-space-left-on-device class=anchor aria-hidden=true>#</a></h2><p>This error could be caused due to various reasons which includes redundant inodes, bad blocks in your volume or an application which fills your <code>/</code> root directory.
However, if you are facing this error after active usage of Haaukins platform you may need to configure your docker volumes path, the content of docker volumes should not be written to <code>/</code> root path.
Check <a href=https://mrturkmen.com/no-space-left-on-device/>this guide</a> for solving <code>No space left on device</code> error and see whether it is caused due to docker or not.</p><p>There is another reason that you may face with this error when you are using Haaukins. In the project, we are using <code>ioutil.Tempfile</code> which is under the hood connected to <code>os.Tempfile</code> and if you do not specify first parameter for that function,
it will use the value of <code>os.TempDir</code> as first parameter and it will check and return following values.</p><p>Definition of how <a href="https://golang.org/src/os/file.go?s=11019:11040#L348">os.TempDir</a>` is finding out which directory to use for temporary files.</p><blockquote><p>TempDir returns the default directory to use for temporary files.
On Unix systems, it returns $TMPDIR if non-empty, else /tmp. On Windows,
it uses GetTempPath, returning the first non-empty value from %TMP%, %TEMP%, %USERPROFILE%,
or the Windows directory. On Plan 9, it returns /tmp.
The directory is neither guaranteed to exist nor have accessible permissions.</p></blockquote><p>If your <code>$TMPDIR</code> not set and you are using linux, then Haaukins will use <code>/tmp</code> directory for writing any temporary files.</p><p>You may need to set it to a place which is generally used for keeping data, e.g <code>/data/tmp</code> , rather than <code>/tmp</code> under root path.</p><p>If any of them did not work for you <a href="https://github.com/aau-network-security/haaukins/issues/new?assignees=&labels=&template=bug_report.md&title=">create issue</a></p><p>Alternatively,symbolic links could be very useful for using a directory which is not under root</p><p>You can bound a symbolic link to <code>/tmp</code> as follows;</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>ln -s /data/tmp /tmp 
</code></pre></div><p>Creating symbolic link means that the data will actually reside in <code>/data/tmp</code> however, the data can be accesible and usable from <code>/tmp</code>.</p><h2 id=vm-import-failed>VM Import failed<a href=#vm-import-failed class=anchor aria-hidden=true>#</a></h2><p>This issue can be caused for different reasons, it could be not enough space on the folder where VM will be important or bad VM file (-bad ova file-), in this case some operations should be done in order to fix it.</p><h3 id=import-vm-failed-due-to-no-space>Import VM failed due to no space<a href=#import-vm-failed-due-to-no-space class=anchor aria-hidden=true>#</a></h3><p>In our case, we have faced with import error which means that when we try to import VM, it failed due to not having space on the server. In this case, an inspection made the reason of failing very clear.</p><p>All data regarding to VM and other applications stayed on <code>root</code> path which is not a common case for managing servers. <code>root</code> path should contain essential programs and installations where operating system is requiring or an application which should be under a user' home folder. Therefore, <code>root</code> path should be as clean as possible, all related data to an application should be stayed under <code>data</code> path/folder.</p><p>Example output of this error:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>10:02AM DBG getting path lock <span class=nv>first_time</span><span class=o>=</span><span class=nb>true</span> <span class=nv>path</span><span class=o>=</span>/&lt;user-daemon-path&gt;/frontends/kali.ova
10:03AM ERR Error <span class=k>while</span> creating new lab VBoxError <span class=o>[</span>import /&lt;user-daemon-path&gt;/frontends/kali.ova --vsys <span class=m>0</span> --vmname kali<span class=o>{</span>ecc3ea71<span class=o>}]</span>: 0%...10%...20%...30%...40%...50%...60%...70%...80%...90%...100%
Interpreting /&lt;user-daemon-path&gt;/frontends/kali.ova...
OK.
0%...10%...20%...30%...
Progress state: VBOX_E_FILE_ERROR
VBoxManage: error: Appliance import failed
VBoxManage: error: Could not create the imported medium <span class=s1>&#39;/&lt;path-to-vms&gt;/VirtualBox VMs/kali/kali-disk001_2.vmdk&#39;</span>.
VBoxManage: error: VMDK: cannot write allocated data block in <span class=s1>&#39;/&lt;path-to-vms&gt;/VirtualBox VMs/kali/kali-disk001_2.vmdk&#39;</span> <span class=o>(</span>VERR_DISK_FULL<span class=o>)</span>
VBoxManage: error: Details: code VBOX_E_FILE_ERROR <span class=o>(</span>0x80bb0004<span class=o>)</span>, component ApplianceWrap, interface IAppliance
VBoxManage: error: Context: <span class=s2>&#34;RTEXITCODE handleImportAppliance(HandlerArg*)&#34;</span> at line <span class=m>886</span> of file VBoxManageAppliance.cpp
Disks:
  vmdisk1	42949672960	-1	http://www.vmware.com/interfaces/specifications/vmdk.html#streamOptimized	kali-disk001.vmdk	-1	-1	
Virtual system 0:
 0: Suggested OS type: <span class=s2>&#34;Debian_64&#34;</span>
    <span class=o>(</span>change with <span class=s2>&#34;--vsys 0 --ostype &lt;type&gt;&#34;</span><span class=p>;</span> use <span class=s2>&#34;list ostypes&#34;</span> to list all possible values<span class=o>)</span>
 1: VM name specified with --vmname: <span class=s2>&#34;kali{ecc3ea71}&#34;</span>
 2: Number of CPUs: <span class=m>2</span>
    <span class=o>(</span>change with <span class=s2>&#34;--vsys 0 --cpus &lt;n&gt;&#34;</span><span class=o>)</span>
 3: Guest memory: <span class=m>1024</span> MB
    <span class=o>(</span>change with <span class=s2>&#34;--vsys 0 --memory &lt;MB&gt;&#34;</span><span class=o>)</span>
 4: Sound card <span class=o>(</span>appliance expects <span class=s2>&#34;&#34;</span>, can change on import<span class=o>)</span>
    <span class=o>(</span>disable with <span class=s2>&#34;--vsys 0 --unit 4 --ignore&#34;</span><span class=o>)</span>
 5: Network adapter: orig NAT, config 3, extra <span class=nv>slot</span><span class=o>=</span>0<span class=p>;</span><span class=nv>type</span><span class=o>=</span>NAT
 6: IDE controller, <span class=nb>type</span> PIIX4
    <span class=o>(</span>disable with <span class=s2>&#34;--vsys 0 --unit 6 --ignore&#34;</span><span class=o>)</span>
 7: IDE controller, <span class=nb>type</span> PIIX4
    <span class=o>(</span>disable with <span class=s2>&#34;--vsys 0 --unit 7 --ignore&#34;</span><span class=o>)</span>
 8: Hard disk image: <span class=nb>source</span> <span class=nv>image</span><span class=o>=</span>kali-disk001.vmdk, target <span class=nv>path</span><span class=o>=</span>/&lt;path-to-vms&gt;/VirtualBox VMs/kali/kali-disk001_2.vmdk, <span class=nv>controller</span><span class=o>=</span>6<span class=p>;</span><span class=nv>channel</span><span class=o>=</span><span class=m>0</span>
    <span class=o>(</span>change target path with <span class=s2>&#34;--vsys 0 --unit 8 --disk path&#34;</span><span class=p>;</span>
    disable with <span class=s2>&#34;--vsys 0 --unit 8 --ignore&#34;</span><span class=o>)</span>
</code></pre></div><p>In order to overcome such a situation, it is always nice to have exclusive data folder for each users on the server where they reside their data regarding to their applications/research.</p><h4 id=create-data-folder-for-each-user-on-the-system>Create data folder for each user on the system<a href=#create-data-folder-for-each-user-on-the-system class=anchor aria-hidden=true>#</a></h4><p>In general, servers have data path which is much higher than normal <code>root</code> path. In order to make <code>root</code> path as clean as possible, all data under <code>/home/${USER}</code> should be migrated into <code>data</code> path</p><p>Changing default home folder can help to overcome the problem.</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>$ sudo su 
$ mkdir /data/<span class=si>${</span><span class=nv>USER</span><span class=si>}</span>
$ chown -R <span class=si>${</span><span class=nv>USER</span><span class=si>}</span>:<span class=si>${</span><span class=nv>USER</span><span class=si>}</span> /data/<span class=si>${</span><span class=nv>USER</span><span class=si>}</span>
$ usermod -d  /data/<span class=si>${</span><span class=nv>USER</span><span class=si>}</span> <span class=si>${</span><span class=nv>USER</span><span class=si>}</span> <span class=c1># will change default home dir to /data/${USER}</span>
$ mv /home/<span class=si>${</span><span class=nv>USER</span><span class=si>}</span>/* /data/<span class=si>${</span><span class=nv>USER</span><span class=si>}</span>
</code></pre></div><p>Following bash script could be used automated way of handling the operation.</p><pre><code>#!/bin/bash 

# do not include the user who logged in to server 
# make sure that user has admin privileges

declare -a users=(&quot;user1&quot; &quot;user2&quot; &quot;user3&quot;)

for user in &quot;${users[@]}&quot;
do
   mkdir /data/$user
   chown -R $user:$user /data/$user
   # or do whatever with individual element of the array
   usermod -d  /data/$user $user
   mv /home/$user/* /data/$user
done

</code></pre><p>Do that operations for all users (-except the one who logged in to server-) who consumes a lot of places in terms of data.</p><p>Afterwards, there will be no problems regarding to spaces until, <code>/data</code> path is full.</p><h3 id=import-failed-due-to-bad-ova-file>Import failed due to bad ova file<a href=#import-failed-due-to-bad-ova-file class=anchor aria-hidden=true>#</a></h3><p>It is very clear that the problem is directly related to corrupted ova file, in those cases update ova file with non-corrupted file.</p><h3 id=import-failed-due-to-no-permission>Import failed due to no permission<a href=#import-failed-due-to-no-permission class=anchor aria-hidden=true>#</a></h3><p>In some cases, permission is denied for importing VMs, in order to overcome, change the permission of the folder where VMs are generated with correct permissions.</p><p>Permissions are changed through <code>chmod</code> command.</p><p>Examples:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>$ chmod +rw /vms/
</code></pre></div><p>It will add to the permission of <code>/vms</code> write and read permissions.</p><h2 id=config-file-not-found>Config file not found<a href=#config-file-not-found class=anchor aria-hidden=true>#</a></h2><p>Basically it clarifies config file is missing, when you are running daemon of Haaukins or from source code, either you need to clarify config file by adding <code>--config</code> flag at the end of file.</p><p>Like;</p><p><code>go run main.go --config=/&lt;absolute-path-to-config>/config.yml</code>]</p><p>For demonized version of Haaukins, you can provide config path after binary such as ;</p><p><code>&lt;path-to-binary>/hknd --config=/&lt;absolute-path-to-config/config.yml></code></p><p>Keep in mind that Haaukins is looking for config.yml file on the same directory with binary, which means that if config.yml file on the same directory with Haaukins binary,
there is no need to provide absolute path of configuration file.</p><h2 id=guacamole-500-error>Guacamole 500 Error<a href=#guacamole-500-error class=anchor aria-hidden=true>#</a></h2><p>This error might happen for some reasons which are;</p><ul><li>VRDE feature is NOT enabled on virtualbox. It needs to be installed by following</li></ul><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>   $ VBoxManage extpack install Oracle_VM_VirtualBox_Extension_Pack-5.2.44.vbox-extpack 
</code></pre></div><p>The version of extension version differs according to version of virtual box that you are having on the server.</p><ul><li><p>VM might NOT be active (Not running state, check it)</p></li><li><p>Be careful about updating and downgrading the kernel version, it may cause serious headaches
Make sure that Docker and Vboxmanage have been installed correctly.</p></li><li><p>For Haaukins specific; check resume functionality on teams to make sure that suspended VMs started without error.
If there is an error happened restart VM which throws the error.</p></li><li><p>Guacamole mysql is NOT able to run. (Crashing)</p></li></ul><p>Mysql requires following configuration file to be placed.</p><ul><li><p><a href="https://help.directadmin.com/item.php?id=529">https://help.directadmin.com/item.php?id=529</a></p></li><li><p><a href=https://dev.mysql.com/doc/refman/5.7/en/innodb-parameters.html#sysvar_innodb_use_native_aio>https://dev.mysql.com/doc/refman/5.7/en/innodb-parameters.html#sysvar_innodb_use_native_aio</a></p></li></ul><h2 id=pool-overlaps-with-other-one-on-this-address-space>Pool overlaps with other one on this address space<a href=#pool-overlaps-with-other-one-on-this-address-space class=anchor aria-hidden=true>#</a></h2><p>This issue has been resolved completely, the reason of this error was that Haaukins is creating random Docker network, using some common private IP addresses. For instance, when you run docker-compose or a docker container, default docker network will assign an IP address from 192.168 or 172 which are common network range which Docker daemon is using. Haaukins was also using that range to generate random Docker networks, which has been updated from the version <a href=https://github.com/aau-network-security/haaukins/releases/tag/2.4.2>2.4.2</a> on Haaukins project, the issue resolved.</p><h3 id=prune-system>Prune System<a href=#prune-system class=anchor aria-hidden=true>#</a></h3><p><code>docker system prune -f</code></p><h3 id=prune-volumes>Prune volumes<a href=#prune-volumes class=anchor aria-hidden=true>#</a></h3><p><code>docker volume prune -f</code></p><h2 id=unable-to-create-database-client>Unable to create database client<a href=#unable-to-create-database-client class=anchor aria-hidden=true>#</a></h2><p>Having problems regarding to database client might be happened due to certificates error, or not running healthy haaukins-store,
in these cases there are some things to care of ;</p><ul><li><p>Ensure haaukins store is running correctly</p><p>It is always good to be sure about docker status of haaukins store, it can be checked through <code>docker-compose logs -f</code> which will feed your stdout with logs,
if everything seems ok and no problem, you can close watching logs. If there is an error or something on logs, try to fix it with proper approach.</p></li><li><p>Check version of store and haaukins daemon</p><p>In some cases, it might be the case where daemon and store do not share same version which means that some functionalities and features might not work. In those cases,
client might not be able to create connection with database due to proto file differences. (- contract differences- ) Ensure that versions are matching, like features
and functionalities released in both programs.</p></li><li><p>Check certificates</p><p>Since haaukins and store are using secure gRPC calls, certificates are required to be in place, however certificates which daemon (-for db client-) and store should share
same certificates to have a secure gRPC connection. Make sure that there is no problem regarding to certificates.</p></li><li><p>Check ports</p><p>Configuration files for both client and daemon is crucial to run the program correctly, hence, it is good habit to check all values in configuration file. Especially, providing port
numbers for store and daemon is quite important for communicating, check out them. If there is no issue regarding to configuration file and if you are still getting error when you run
the program, check logs in depth.</p></li></ul><h2 id=certificate-issue>Certificate Issue<a href=#certificate-issue class=anchor aria-hidden=true>#</a></h2><p>Certificates are crucial for any component of haaukins which provides secure communication between clients and server, for this reason, it is quite important to
setup auto-renew of certificates for all domains where haaukins component is using. For a domain where there is no certificate issued yet, following script can help
to retrieve certificate from Let&rsquo;s Encrypt, before using the script make sure that you are able to add TXT record on domain manager like Cloudflare.</p><p>Keep in mind that, <code>example.domain.com</code> should be changed with your domain which you would like to get certificate on.</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>
<span class=c1>#!/bin/bash</span>

<span class=c1># /etc/letsencrypt</span>
<span class=c1># WHAT: This is the default configuration directory. This is where certbot will store all</span>
<span class=c1># generated keys and issues certificates.</span>
<span class=c1>#</span>
<span class=c1># /var/lib/letsencrypt</span>
<span class=c1># WHAT: This is default working directory.</span>
<span class=c1>#</span>
<span class=c1># certonly</span>
<span class=c1># WHAT: This certbot subcommand tells certbot to obtain the certificate but not not</span>
<span class=c1># install it. We don&#39;t need to install it because we will be linking directly to the</span>
<span class=c1># generated certificate files from within our subsequent nginx configuration.</span>
<span class=c1>#</span>
<span class=c1># -d</span>
<span class=c1># WHAT: Defines one of the domains to be used in the certificate. We can have up to 100</span>
<span class=c1># domains in a single certificate. In this case, we&#39;re obtaining a wildcard-subdomain</span>
<span class=c1># certificate (which was just made possible!) in addition to the base domain.</span>
<span class=c1>#</span>
<span class=c1># --manual</span>
<span class=c1># WHAT: Tells certbot that we are going to use the &#34;manual&#34; plug-in, which means we will</span>
<span class=c1># require interactive instructions for passing the authentication challenge. In this case</span>
<span class=c1># (using DNS), we&#39;re going to need to know which DNS TXT entires to create in our domain</span>
<span class=c1># name servers.</span>
<span class=c1>#</span>
<span class=c1># --preferred-challenges dns</span>
<span class=c1># WHAT: Defines which of the authentication challenges we want to implement with our</span>
<span class=c1># manual configuration steps.</span>
<span class=c1>#</span>
<span class=c1># --server https://acme-v02.api.letsencrypt.org/directory</span>
<span class=c1># WHAT: The client end-point / resource that provides the actual certificates. The &#34;v02&#34;</span>
<span class=c1># end-point is the only one capable of providing wildcard SSL certificates at this time,</span>
<span class=c1># (ex, *.example.com).</span>
<span class=c1>#</span>
docker run -it --rm --name letsencrypt <span class=se>\
</span><span class=se></span>	-v <span class=s2>&#34;/etc/letsencrypt:/etc/letsencrypt&#34;</span> <span class=se>\
</span><span class=se></span>	-v <span class=s2>&#34;/var/lib/letsencrypt:/var/lib/letsencrypt&#34;</span> <span class=se>\
</span><span class=se></span>	quay.io/letsencrypt/letsencrypt:latest <span class=se>\
</span><span class=se></span>		certonly <span class=se>\
</span><span class=se></span>        -d example.domain.com
		-d *.example.domain.com <span class=se>\
</span><span class=se></span>		--manual <span class=se>\
</span><span class=se></span>		--preferred-challenges dns <span class=se>\
</span><span class=se></span>		--server https://acme-v02.api.letsencrypt.org/directory
</code></pre></div><p>Once certificates are retrieved and placed, you have to have auto-renew as cron job or inside a docker environment in order to do not deal
with renewing certificates manually all the time.</p><p>You can either download and use <code>certbot-auto renew</code> command from directly host or you can perform same thing through docker,
for host integration following steps should be enough :</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>$ <span class=nb>cd</span> /etc/letsencrypt 
$ wget https://dl.eff.org/certbot-auto <span class=o>&amp;&amp;</span> chmod a+x certbot-auto
$ ./certbot-auto renew 
</code></pre></div><p>It will check certificates and renew them if they are about to expire, you can add that task into cron job.</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>$ crontab -e 
<span class=m>0</span> <span class=m>0</span> * * <span class=m>0</span> <span class=nb>cd</span> /etc/letsencrypt/ <span class=o>&amp;&amp;</span> ./certbot-auto renew 
</code></pre></div><p>It will run every week at 00:00 on Sunday.</p><p>For Docker based approach, similar steps can be achieved as well, there are plenty of examples regarding to it, you may check following approach or create new one;</p><ul><li><a href=https://github.com/adferrand/dnsrobocert>https://github.com/adferrand/dnsrobocert</a></li></ul><p class=edit-page><a href=https://github.com/aau-network-security/haaukins-docs/blob/master/content/docs/help/troubleshooting.md><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit-2"><path d="M17 3a2.828 2.828.0 114 4L7.5 20.5 2 22l1.5-5.5L17 3z"/></svg>Edit this page on GitHub</a></p><div class="docs-navigation d-flex justify-content-between"><a href=/docs/challenges/how-to-create-chal/><div class="card my-1"><div class="card-body py-2">&larr; How to Create A Challenge</div></div></a></div></main></div></div></div><footer class="footer text-muted"><div class=container><div class=row><div class="col-lg-8 order-last order-lg-first"><ul class=list-inline><li class=list-inline-item>Haaukins - Open Source Cyber Training Platform</li></ul></div><div class="col-lg-8 order-first order-lg-last text-lg-right"><ul class=list-inline><li class=list-inline-item><a href=/privacy-policy/>Privacy</a></li></ul></div></div></div></footer><script src=/main.7aae31ac6f142dfbc02d0f1d58678e78716c88e1a9c5565039568ada8cfed1a0dd9244e0a3bc4504b6e45e0e67b35e3b7d7a8024de06f37cfe3333d7ef220a91.js integrity="sha512-eq4xrG8ULfvALQ8dWGeOeHFsiOGpxVZQOVaK2oz+0aDdkkTgo7xFBLbkXg5ns147fXqAJN4G83z+MzPX7yIKkQ==" crossorigin=anonymous defer></script><script src=/index.min.c4e813c41645762fb5401914f7e898f9bfdbeaf013818cbf222cd6196eb13e55edbda54f844971730d49793fdf93ac74970bd77985dd4cb0b1e8efc51c3df2bd.js integrity="sha512-xOgTxBZFdi+1QBkU9+iY+b/b6vATgYy/IizWGW6xPlXtvaVPhElxcw1JeT/fk6x0lwvXeYXdTLCx6O/FHD3yvQ==" crossorigin=anonymous defer></script></body></html>